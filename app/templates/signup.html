{% extends "base.html" %}
{% block content %}

<div class="container mt-5" style="max-width: 600px;">
  <h2 class="mb-4">Create Your Locallie Account</h2>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="alert alert-warning">
        {% for message in messages %}
          <div>{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <form method="POST" action="/signup" class="shadow p-4 bg-light rounded">
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input type="text" class="form-control" name="name" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" class="form-control" name="email" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Password</label>
      <input type="password" class="form-control" name="password" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Signup as</label>
      <select class="form-select" name="role" id="role" required onchange="toggleCityField()">
        <option value="">Select Role</option>
        <option value="traveler">Traveler</option>
        <option value="local">Local</option>
      </select>
    </div>

    <div class="mb-3" id="cityField">
      <label class="form-label">City</label>
      <select name="city" class="form-select" required>
        <option value="">Select City</option>
        <option value="Vadodara">Vadodara</option>
        <option value="Ahmedabad">Ahmedabad</option>
        <option value="Surat">Surat</option>
        <option value="Rajkot">Rajkot</option>
        <option value="Gandhinagar">Gandhinagar</option>
        <option value="Mumbai">Mumbai</option>
        <option value="Delhi">Delhi</option>
        <option value="Bangalore">Bangalore</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary w-100">Sign Up</button>
  </form>

  <p class="text-center mt-3 text-muted">Already have an account? <a href="{{ url_for('main.signin') }}">Sign In</a></p>
</div>

<script>
  function toggleCityField() {
    const role = document.getElementById("role").value;
    const cityField = document.getElementById("cityField");
    cityField.style.display = role ? 'block' : 'none';
  }
  // Initialize display on load
  window.onload = toggleCityField;
</script>

{% endblock %}
